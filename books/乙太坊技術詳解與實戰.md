```

```
```
第1章 乙太坊：新一代的區塊鏈平臺  1
1.1 理解區塊鏈  2
1.2 乙太坊設計思路與特色技術  4

1.3 應用場景  8

1.4 去中心化應用DApp  10
1.4.1 DApp的優勢  10
1.4.2 DApp實例  11

1.5 乙太坊的主流開源項目  13


第2章 乙太坊架構和組成  15
2.1 乙太坊整體架構  15
2.2 區塊  16
2.3 帳戶  18
2.3.1 外部帳戶  19
2.3.2 合約帳戶  20
2.3.3 私密金鑰和公開金鑰  20
2.3.4 錢包  22
2.4 資料結構與存儲  24
2.4.1 數據組織形式  24
2.4.2 狀態樹  29
2.4.3 交易樹  29
2.4.4 收據樹  29
2.4.5 資料庫支援——LevelDB  30
2.5 共識機制  30
2.5.1 PoW  31
2.5.2 PoS  34

2.6 乙太幣  36
2.7 交易  41
2.7.1 交易費用  41
2.7.2 交易內容  43
2.7.3 一個交易在乙太坊中的“旅程”  45
2.8 資料編碼與壓縮  51
2.9 乙太坊用戶端和API  52
2.10 乙太坊功能變數名稱服務  57


第3章 不同類型的乙太坊區塊鏈及其部署  59

3.1 區塊鏈類型  59
3.1.1 公有鏈  60
3.1.2 聯盟鏈  61
3.1.3 私有鏈  66

3.2 安裝和部署乙太坊  67
3.2.1 安裝乙太坊用戶端  67
3.2.2 部署乙太坊聯盟鏈  70

3.3 如何在Azure上挖礦  81
3.3.1 部署虛擬機器  81
3.3.2 安裝GPU驅動  82
3.3.3 安裝挖礦工具包  83
3.3.4 加入礦池  83
3.3.5 GPU挖礦收益權衡  83



第4章 智慧合約與乙太坊虛擬機器  86

4.1 智能合約  86
4.1.1 智慧合約的操作  89
4.1.2 存儲方式  90
4.1.3 指令集和消息調用  92
4.1.4 日誌  93

4.2 Solidity語言  93
4.2.1 結構  93
4.2.2 變數類型  94
4.2.3 內置單位、全域變數和函數  100
4.2.4 控制結構語句  101
4.2.5 函數  103
4.2.6 constant函數和fallback函數  105
4.2.7 函數修改器  106
4.2.8 異常處理  107
4.2.9 事件和日誌  109
4.2.10 智能合約的繼承  110


第5章 編寫和部署智能合約  113

5.1 智慧合約工具  113

5.2 Solidity集成開發工具Remix  115
5.2.1 Remix介面  115
5.2.2 初探Remix調試  117
5.2.3 使用Remix調試智慧合約的多種調用方式  120

5.3 Truffle  126
5.3.1 Truffle安裝  126
5.3.2 創建  128
5.3.3 編譯  129
5.3.4 部署  129
5.3.5 測試  132
5.3.6 設定檔  133

5.4 如何保證智慧合約的安全可靠  134
5.4.1 常見的安全陷阱  135
5.4.2 智慧合約開發建議  140


第6章 智能合約案例詳解  143
6.1 投票  143
6.2 拍賣和盲拍  153
6.2.1 公開拍賣  153
6.2.2 盲拍  156
6.3 狀態機  161
6.4 許可權控制  163



第7章 乙太坊上數位資產的發行和流通  167

7.1 乙太坊上的數位資產定義  167
7.2 發行和流通  168

7.3 ERC 20代幣合約標準  168
7.3.1 標準定義  169
7.3.2 ERC 20標準介面  169
7.3.3 現有ERC 20標準代幣  171

7.4 ERC 721代幣合約標準  174
7.4.1 標準定義  174
7.4.2 CryptoKitties DApp  175


第8章 乙太坊資料查詢與分析工具  178
8.1 乙太坊流覽器Etherscan  178
8.1.1 Etherscan的基本功能  179
8.1.2 其他功能  190
8.1.3 API  193
8.1.4 ENS功能變數名稱查詢  194

8.2 ETHERQL  195
8.2.1 同步處理管理員  197
8.2.2 處理常式鏈  197
8.2.3 持久化框架  198
8.2.4 開發者介面  198
8.2.5 實現  199


第9章 乙太坊性能優化  201
9.1 分片技術  201
9.2 雷電網路  205
9.3 Casper——下一代乙太坊共識協定  208


0章 隱私保護和資料安全  211

10.1 區塊鏈的隱私問題  212
10.1.1 “化名”與“匿名”  212
10.1.2 去匿名攻擊：交易表分析  212

10.2 零鈔：基於zkSNARK的完美混幣池  214
10.2.1 零知識證明  214
10.2.2 零鈔的運行原理  215

10.3 Hawk：保護合約資料私密性  216

10.4 Coco框架  218
10.4.1 TEE環境簡介  219
10.4.2 Coco框架的運行原理  219

10.5 乙太坊隱私保護技術路線：Baby ZoE  221

10.6 總結與展望  223
10.6.1 隱私方案總結  223
10.6.2 隱私技術展望  223




```
